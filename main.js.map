{"version":3,"sources":["webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/user-info.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/popup-with-image.js","webpack://mesto/./src/components/popup-with-form.js","webpack://mesto/./src/components/PopupConfirm.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/pages/index.js"],"names":["Card","data","user","cardSelector","openBigCard","handleTrashClick","handleLikeClick","this","_title","name","_likes","likes","_link","link","_ID","_id","_owner","owner","_user","_likesCounter","length","_cardSelector","_openBigCard","_handleTrashClick","_handleLikeClick","document","querySelector","content","cloneNode","_element","classList","add","remove","arr","some","like","textContent","_getTemplate","title","image","src","alt","setLikes","_checkLike","likeCard","_getLikesCounter","_setEventListeners","_checkTrash","addEventListener","console","log","Section","containerSelector","renderer","_renderer","_container","items","userData","forEach","item","element","append","prepend","UserInfo","_modalProfile","_profileName","_profileSpecial","_profileAvatar","special","url","Popup","popup","_popup","_handleEventClose","bind","removeEventListener","evt","key","target","contains","preventDefault","close","PopupWithImage","_modalCardImage","_modalSign","PopupWithForm","sendForm","_sendForm","_form","_button","_getInputValues","_inputList","querySelectorAll","_formValues","input","value","reset","PopupConfirm","_buttonConfirm","submitAction","_handleSubmitCallback","Api","_base","_token","fetch","method","headers","authorization","then","res","ok","json","Promise","reject","status","body","JSON","stringify","about","specialization","avatar","cardID","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","modalProfile","specialInput","nameInput","modalAvatar","linkInput","infoUser","FormValidator","form","config","_config","_buttonSubmit","inputItem","errorMessage","errorItem","id","validity","valid","_hideInputError","_showInputError","validationMessage","inputList","buttonItem","_hasValidInput","disabled","Array","from","_toggleButtonState","_isValid","modalNewCard","modalImage","modalCardDelete","formCardDelete","formAvatar","formProfile","formNewCard","modalCardName","profileAvatar","profileEditButton","buttonCreateCard","formUserProfile","enableValidation","formAddCard","formRemoveCard","formUserAvatar","userInfo","api","all","getUserInfo","getInitialCards","values","cards","setUserInfo","setUserAvatar","initializationCards","renderItems","catch","err","popupBigCard","setEventListeners","popupAvatar","button","modificationTextButton","updateAvatar","finally","backTextButton","popupProfile","editUserInfo","open","popupConfirm","card","setSubmitAction","deleteCard","handlePopupConfirm","isLiked","deleteLike","dislikeCard","putLike","popupNewCard","addNewCard","cardElement","generateCard","addItemHead","addItem","dataForm","blockSubmitButton","focus","linkAvatar","getUserAvatar"],"mappings":"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","file":"main.js","sourcesContent":["export class Card {\r\n  constructor(data, user, cardSelector, openBigCard, handleTrashClick, handleLikeClick) {\r\n    this._title = data.name;\r\n    this._likes = data.likes;\r\n    this._link = data.link;\r\n    this._ID = data._id;\r\n    this._owner = data.owner;\r\n    //this._buttonLike = this.querySelector('.card__like');\r\n    this._user = user;\r\n    this._likesCounter = data.likes.length;\r\n    this._cardSelector = cardSelector;\r\n    this._openBigCard = openBigCard;\r\n    this._handleTrashClick = handleTrashClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n  }\r\n  // Получаем шаблон разметки \r\n  _getTemplate() {\r\n    const cardElement = document.querySelector(this._cardSelector)\r\n      .content\r\n      .querySelector('.cards__item')\r\n      .cloneNode(true);\r\n\r\n    return cardElement;\r\n  }\r\n  //Ставим/снимаем Лайк\r\n  likeCard() {\r\n    this._element.querySelector('.card__like').classList.add('card__like_active');\r\n  }\r\n\r\n  dislikeCard() {\r\n    this._element.querySelector('.card__like').classList.remove('card__like_active');\r\n  }\r\n\r\n  _checkLike(arr = this._likes) {\r\n    return arr.some(like => {\r\n      return like._id === this._user._id;\r\n    })\r\n  }\r\n\r\n  // Удаляем карточку\r\n  deleteCard() {\r\n    this._element.remove();\r\n    this._element = null;\r\n  }\r\n\r\n  // \r\n\r\n  // Получаем количество лайков при загрузке\r\n  _getLikesCounter() {\r\n    const likes = this._element.querySelector('.card__likes-counter');\r\n    if (this._likesCounter === 0) {\r\n      likes.textContent = '';\r\n    }\r\n    else {\r\n      likes.textContent = this._likesCounter;\r\n    }\r\n  }\r\n\r\n  setLikes(arr) {\r\n    this._element.querySelector('.card__likes-counter').textContent = arr.length;\r\n    this._likes = arr;\r\n  }\r\n\r\n  // Скрываем корзину\r\n  _checkTrash() {\r\n    if (this._owner._id !== this._user._id) {\r\n      this._element.querySelector('.card__delete').classList.add('card__delete_hidden');\r\n    }\r\n  }\r\n\r\n  // Создаем карточку\r\n  generateCard() {\r\n    this._element = this._getTemplate();\r\n    const title = this._element.querySelector('.card__title');\r\n    const image = this._element.querySelector('.card__image');\r\n\r\n    title.textContent = this._title;\r\n    image.src = this._link;\r\n    image.alt = `Карточка ${this._title}`;\r\n\r\n    this.setLikes(this._likes);\r\n    if (this._checkLike()) {\r\n      this.likeCard();\r\n    }\r\n\r\n    this._getLikesCounter();\r\n\r\n    this._setEventListeners();\r\n    this._checkTrash();\r\n\r\n    return this._element;\r\n  }\r\n\r\n  // Вешаем обработчики\r\n  _setEventListeners() {\r\n    this._element.querySelector('.card__like').addEventListener('click', () => {\r\n      this._handleLikeClick(this._ID, this._checkLike(), this);\r\n      console.log(this._likes);\r\n    });\r\n    this._element.querySelector('.card__delete').addEventListener('click', () => {\r\n      this._handleTrashClick(this._ID, this);\r\n    });\r\n    this._element.querySelector('.card__image').addEventListener('click', () => {\r\n      this._openBigCard(this._title, this._link);\r\n    });\r\n  }\r\n}\r\n\r\n","export default class Section {\r\n  constructor({ renderer }, containerSelector) {\r\n    //this._renderedItems = data;\r\n    this._renderer = renderer;\r\n    this._container = containerSelector;\r\n  }\r\n\r\n  renderItems(items, userData) {\r\n    items.forEach(item => this._renderer(item, userData))\r\n  }\r\n\r\n  //renderItems(items, data) {\r\n  //  items.forEach(item => this._renderer(item, data))\r\n  //}\r\n\r\n  // Добавить карточку в конец списка\r\n  addItem(element) {\r\n    this._container.append(element);\r\n  }\r\n\r\n  // Добавить карточку в начало списка\r\n  addItemHead(element) {\r\n    this._container.prepend(element);\r\n  }\r\n} ","\r\nexport default class UserInfo {\r\n  constructor() {\r\n    this._modalProfile = document.querySelector('.popup_type_profile');\r\n    this._profileName = document.querySelector('.profile__name');\r\n    this._profileSpecial = document.querySelector('.profile__specialization');\r\n    this._profileAvatar = document.querySelector('.profile__avatar');\r\n  }\r\n\r\n  getUserInfo() {\r\n    return {\r\n      name: this._profileName.textContent,\r\n      special: this._profileSpecial.textContent\r\n    }\r\n  }\r\n\r\n  getUserAvatar() {\r\n    return this._profileAvatar.src;\r\n  }\r\n\r\n  setUserInfo(name, special) {\r\n    this._profileName.textContent = name;\r\n    this._profileSpecial.textContent = special;\r\n  }\r\n\r\n  setUserAvatar(url) {\r\n    this._profileAvatar.src = url;\r\n  }\r\n}","export default class Popup {\r\n  constructor(popup) {\r\n    this._popup = popup;\r\n    this._handleEventClose = this._handleEventClose.bind(this);\r\n  }\r\n\r\n  // Анимация открытия и закрытия модального окна\r\n  _slideDownPopup() {\r\n    this._popup.querySelector('.popup__body').classList.add('popup__body_slice');\r\n  }\r\n\r\n  _slideUpPopup() {\r\n    this._popup.querySelector('.popup__body').classList.remove('popup__body_slice');\r\n  }\r\n\r\n  // Закрытие модального окна\r\n  close() {\r\n    this._popup.querySelector('.popup__body').classList.remove('popup__body_slice');\r\n    document.removeEventListener('keydown', this._handleEventClose);\r\n    document.removeEventListener('click', this._handleEventClose);\r\n    this._popup.classList.remove('popup_show');\r\n  }\r\n\r\n  // Закрытие по событию \r\n  _handleEventClose(evt) {\r\n\r\n    if (evt.key === 'Escape' || evt.target.classList.contains('popup_show')) {\r\n      evt.preventDefault();\r\n      this.close();\r\n    }\r\n  };\r\n\r\n  // Открытие модального окна\r\n  open() {\r\n    this._popup.classList.add('popup_show');\r\n    this._popup.querySelector('.popup__body').classList.add('popup__body_slice');\r\n    document.addEventListener('keydown', this._handleEventClose);\r\n    document.addEventListener('click', this._handleEventClose);\r\n  }\r\n\r\n  // Установка слушателей\r\n  setEventListeners() {\r\n    this._popup.querySelector('.popup__button-close').addEventListener('click', this.close.bind(this));\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popup) {\r\n    super(popup);\r\n    this._modalCardImage = popup.querySelector('.popup__card-image');\r\n    this._modalSign = popup.querySelector('.popup__sign');\r\n  }\r\n\r\n  open(name, link) {\r\n    super.open();\r\n    this._modalCardImage.src = link;\r\n    this._modalCardImage.alt = `Карточка ${name}`;\r\n    this._modalSign.textContent = name;\r\n\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popup, sendForm) {\r\n    super(popup);\r\n    this._sendForm = sendForm;\r\n    this._form = popup.querySelector('.form');\r\n    this._button = this._form.querySelector('.popup__button-submit');\r\n  }\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n      this._sendForm(this._getInputValues());\r\n    });\r\n  }\r\n\r\n  _getInputValues() {\r\n    this._inputList = this._form.querySelectorAll('.popup__input');\r\n\r\n    this._formValues = {};\r\n    this._inputList.forEach(input => this._formValues[input.name] = input.value);\r\n\r\n    return this._formValues;\r\n  }\r\n\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupConfirm extends Popup {\r\n  constructor(popup) {\r\n    super(popup);\r\n    this._buttonConfirm = popup.querySelector('.popup__button-submit');\r\n  }\r\n  setSubmitAction(submitAction) {\r\n    this._handleSubmitCallback = submitAction;\r\n  }\r\n  // дополнительно добавляем обработчик клика подтверждения\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._buttonConfirm.addEventListener(\"click\", () => {\r\n      this._handleSubmitCallback()\r\n    });\r\n  }\r\n}","\r\n\r\nexport default class Api {\r\n  constructor() {\r\n    this._base = 'https://mesto.nomoreparties.co/v1/cohort-19/';\r\n    this._token = '11f304a7-0c18-4e6f-ac0a-f5def34dbfe2';\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._base}users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  editUserInfo(data) {\r\n    return fetch(`${this._base}users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.user,\r\n        about: data.specialization\r\n      })\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  updateAvatar(link) {\r\n    return fetch(`${this._base}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      })\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._base}cards`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  addNewCard(data) {\r\n    return fetch(`${this._base}cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  deleteCard(cardID) {\r\n    return fetch(`${this._base}cards/${cardID}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-type': 'application/json'\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  putLike(cardID) {\r\n    return fetch(`${this._base}cards/likes/${cardID}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-type': 'application/json'\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  deleteLike(cardID) {\r\n    return fetch(`${this._base}cards/likes/${cardID}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-type': 'application/json'\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n      })\r\n  }\r\n}","\r\nexport const validationConfig = {\r\n  formSelector: '.form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button-submit',\r\n  inactiveButtonClass: 'popup__button-submit_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_active'\r\n};\r\n\r\nexport const modalCardImage = document.querySelector('.popup__card-image');\r\nexport const modalSign = document.querySelector('.popup__sign');\r\nexport const containerSelector = document.querySelector('.cards');\r\nexport const modalProfile = document.querySelector('.popup_type_profile');\r\nexport const profileName = document.querySelector('.profile__name');\r\nexport const profileSpecial = document.querySelector('.profile__specialization');\r\nexport const specialInput = modalProfile.querySelector('.popup__input_item_specialization');\r\nexport const nameInput = modalProfile.querySelector('.popup__input_item_name');\r\nexport const modalAvatar = document.querySelector('.popup_type_avatar');\r\nexport const linkInput = modalAvatar.querySelector('.popup__input_item_path');\r\nexport const myProfileForm = {\r\n  name: modalProfile.querySelector('.popup__input_item_name'),\r\n  special: modalProfile.querySelector('.popup__input_item_specialization')\r\n}","import { validationConfig } from '../utils/constants.js';\r\n\r\nexport class FormValidator {\r\n\r\n  constructor(form, config) {\r\n    this.form = form;\r\n    this._config = config;\r\n    this._buttonSubmit = this.form.querySelector(this._config.submitButtonSelector);\r\n  }\r\n\r\n  // Включаем стилизацию ошибок на форме\r\n  _showInputError(inputItem, errorMessage) {\r\n    const errorItem = this.form.querySelector(`#${inputItem.id}-error`);\r\n\r\n    inputItem.classList.add(this._config.inputErrorClass);\r\n    errorItem.textContent = errorMessage;\r\n    errorItem.classList.add(this._config.errorClass);\r\n  }\r\n\r\n  // Убираем стилизацию ошибок с формы\r\n  _hideInputError(inputItem) {\r\n    const errorItem = this.form.querySelector(`#${inputItem.id}-error`);\r\n\r\n    inputItem.classList.remove(this._config.inputErrorClass);\r\n    errorItem.classList.remove(this._config.errorClass);\r\n    errorItem.textContent = '';\r\n  }\r\n\r\n  // Проверяем текущее поле\r\n  _isValid(inputItem) {\r\n    if (!inputItem.validity.valid) {\r\n      this._showInputError(inputItem, inputItem.validationMessage);\r\n    }\r\n    else {\r\n      this._hideInputError(inputItem);\r\n    }\r\n  }\r\n\r\n  // Инициируем проверку полей загруженной формы\r\n  _hasValidInput(inputList) {\r\n    return inputList.some((inputItem) => {\r\n\r\n      return !inputItem.validity.valid;\r\n    });\r\n  }\r\n\r\n  // Переключатель состояния кнопки \"Отправить\"\r\n  _toggleButtonState(inputList, buttonItem) {\r\n    if (this._hasValidInput(inputList)) {\r\n      buttonItem.disabled = true;\r\n      buttonItem.classList.add(this._config.inactiveButtonClass);\r\n    }\r\n    else {\r\n      buttonItem.disabled = false;\r\n      buttonItem.classList.remove(this._config.inactiveButtonClass);\r\n    }\r\n  }\r\n\r\n  // Вешаем обработчики событий\r\n  _setEventListeners() {\r\n    const inputList = Array.from(this.form.querySelectorAll(this._config.inputSelector));\r\n\r\n    this._toggleButtonState(inputList, this._buttonSubmit);\r\n\r\n    inputList.forEach((inputItem) => {\r\n      inputItem.addEventListener('input', () => {\r\n\r\n        this._isValid(inputItem);\r\n\r\n        this._toggleButtonState(inputList, this._buttonSubmit);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Блокируем кнопку отправки формы при открытии\r\n  blockSubmitButton() {\r\n\r\n    if (this._buttonSubmit) {\r\n      this._buttonSubmit.classList.add(this._config.inactiveButtonClass);\r\n      this._buttonSubmit.disabled = true;\r\n    }\r\n  }\r\n\r\n  // Меняем текст кнопки при запросе на сервер\r\n  modificationTextButton() {\r\n    if (this._buttonSubmit.textContent === 'Сохранить') {\r\n      return 'Сохранение...';\r\n    }\r\n    else if (this._buttonSubmit.textContent === 'Создать') {\r\n      return 'Создание...';\r\n    }\r\n    else if (this._buttonSubmit.textContent === 'Да') {\r\n      return 'Да...';\r\n    }\r\n    else { console.log('Не попал в проверку') }\r\n  }\r\n\r\n  // Возвращаем текст кнопки\r\n  backTextButton() {\r\n    if (this._buttonSubmit.textContent === 'Сохранение...') {\r\n      return 'Сохранить';\r\n    }\r\n    else if (this._buttonSubmit.textContent === 'Создание...') {\r\n      return 'Создать';\r\n    }\r\n    else {\r\n      return 'Да';\r\n    }\r\n  }\r\n\r\n  // \r\n  enableValidation() {\r\n\r\n    this.form.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    this._setEventListeners();\r\n  }\r\n}","import './index.css';\r\n\r\nimport { Card } from '../components/Card.js';\r\nimport Section from '../components/Section.js';\r\nimport UserInfo from '../components/user-info.js';\r\nimport PopupWithImage from '../components/popup-with-image.js';\r\nimport PopupWithForm from '../components/popup-with-form.js';\r\nimport PopupConfirm from '../components/PopupConfirm.js';\r\nimport Api from '../components/Api.js';\r\nimport { FormValidator } from '../components/FormValidator.js';\r\nimport {\r\n  validationConfig, containerSelector, modalProfile, nameInput, specialInput, modalAvatar, linkInput\r\n} from '../utils/constants.js';\r\n\r\n\r\n// --- БЛОК ГЛОБАЛЬНЫХ ПЕРЕМЕННЫХ ---\r\nconst modalNewCard = document.querySelector('.popup_type_new-card');\r\nconst modalImage = document.querySelector('.popup_type_image');\r\nconst modalCardDelete = document.querySelector('.popup_type_card-delete');\r\nconst formCardDelete = modalCardDelete.querySelector('.popup__card-del');\r\n\r\nconst formAvatar = modalAvatar.querySelector('.popup__avatar');\r\n\r\nconst formProfile = modalProfile.querySelector('.popup__profile');\r\n\r\nconst formNewCard = modalNewCard.querySelector('.popup__new-card');\r\nconst modalCardName = modalNewCard.querySelector('.popup__input_item_title');\r\nlet infoUser;\r\n\r\nconst profileAvatar = document.querySelector('.profile__avatar');\r\nconst profileEditButton = document.querySelector('.profile__button-edit');\r\nconst buttonCreateCard = document.querySelector('.profile__button-new-card');\r\n// --- \r\n\r\n// --- Создаем экземпляры класса валидации для каждой формы\r\nconst formUserProfile = new FormValidator(formProfile, validationConfig);\r\nformUserProfile.enableValidation();\r\nconst formAddCard = new FormValidator(formNewCard, validationConfig);\r\nformAddCard.enableValidation();\r\nconst formRemoveCard = new FormValidator(formCardDelete, validationConfig);\r\nformRemoveCard.enableValidation();\r\nconst formUserAvatar = new FormValidator(formAvatar, validationConfig);\r\nformUserAvatar.enableValidation();\r\nconst userInfo = new UserInfo();\r\n\r\nconst api = new Api();\r\n\r\nPromise.all([\r\n  api.getUserInfo(),\r\n  api.getInitialCards()\r\n])\r\n  .then((values) => {\r\n    const user = values[0];\r\n    const cards = values[1];\r\n    console.log(user);\r\n    console.log(cards);\r\n    userInfo.setUserInfo(user.name, user.about);\r\n    userInfo.setUserAvatar(user.avatar);\r\n    initializationCards.renderItems(cards, user);\r\n    infoUser = user;\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n\r\nconst popupBigCard = new PopupWithImage(modalImage);\r\npopupBigCard.setEventListeners();\r\n\r\n// --- ФУНКЦИЯ Загрузка формы профиля ---\r\nconst openEditProfileModal = () => {\r\n\r\n  const dataForm = userInfo.getUserInfo();\r\n\r\n  nameInput.value = dataForm.name;\r\n  specialInput.value = dataForm.special;\r\n\r\n\r\n  formUserProfile.blockSubmitButton();\r\n  popupProfile.open();\r\n  nameInput.focus();\r\n};\r\n\r\n// --- ФУНКЦИЯ Загрузка формы создания карточки ---\r\nconst openAddCardModal = () => {\r\n\r\n  modalCardName.focus();\r\n\r\n  formAddCard.blockSubmitButton();\r\n\r\n  popupNewCard.open();\r\n};\r\n\r\n// --- ФУНКЦИЯ Загрузка формы смены аватара ---\r\nconst openAvatarModal = () => {\r\n  const linkAvatar = userInfo.getUserAvatar();\r\n\r\n  linkInput.value = linkAvatar;\r\n\r\n  formUserAvatar.blockSubmitButton();\r\n\r\n  popupAvatar.open();\r\n};\r\n\r\n// --- ФУНКЦИЯ Отправка формы ---\r\nconst handleFormSubmit = (item) => {\r\n  const button = formProfile.querySelector('.popup__button-submit');\r\n  button.textContent = formUserProfile.modificationTextButton();\r\n  const { user, specialization } = item;\r\n\r\n  api.editUserInfo(item)\r\n    .then((res) => {\r\n      console.log(res);\r\n      userInfo.setUserInfo(res.name, res.about);\r\n      popupProfile.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      button.textContent = formUserProfile.backTextButton();\r\n    })\r\n};\r\n\r\n// ---ФУНКЦИЯ Обновление Аватара пользователя ---\r\nconst updateUserAvatar = (linkInput) => {\r\n  const { link } = linkInput;\r\n  const button = formAvatar.querySelector('.popup__button-submit');\r\n  button.textContent = formUserAvatar.modificationTextButton();\r\n  api.updateAvatar(link)\r\n    .then((res) => {\r\n      userInfo.setUserAvatar(res.avatar);\r\n      popupAvatar.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      button.textContent = formUserAvatar.backTextButton();\r\n    })\r\n};\r\nconst popupAvatar = new PopupWithForm(modalAvatar, updateUserAvatar)\r\npopupAvatar.setEventListeners();\r\nconst popupProfile = new PopupWithForm(modalProfile, handleFormSubmit);\r\npopupProfile.setEventListeners();\r\n\r\n// --- ФУНКЦИЯ Открываем большую карточку\r\nconst openBigCard = (name, link) => {\r\n\r\n  popupBigCard.open(name, link);\r\n}\r\n\r\n\r\n// --- ФУНКЦИЯ Добавление новой карточки\r\nconst addCard = (item) => {\r\n  const button = formNewCard.querySelector('.popup__button-submit');\r\n  button.textContent = formAddCard.modificationTextButton();\r\n  api.addNewCard(item)\r\n    .then((res) => {\r\n      const card = new Card(res, infoUser, '.card-template', openBigCard, handleTrashClick, handleLikeClick);\r\n      const cardElement = card.generateCard();\r\n\r\n      initializationCards.addItemHead(cardElement);\r\n\r\n      popupNewCard.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      button.textContent = formAddCard.backTextButton();\r\n    })\r\n};\r\n\r\nconst popupConfirm = new PopupConfirm(modalCardDelete);\r\npopupConfirm.setEventListeners();\r\n\r\n// --- ФУНКЦИЯ Открытие формы удаления карточки ---\r\nfunction handleTrashClick(id, card) {\r\n  popupConfirm.setSubmitAction(() => handlePopupConfirm(id, card))\r\n  popupConfirm.open();\r\n}\r\n// --- ФУНКЦИЯ Удаление карточек пользователя ---\r\nfunction handlePopupConfirm(id, card) {\r\n  const button = formCardDelete.querySelector('.popup__button-submit');\r\n  button.textContent = formRemoveCard.modificationTextButton();\r\n  api.deleteCard(id, card)\r\n    .then((item) => {\r\n      console.log(item);\r\n      card.deleteCard();\r\n      popupConfirm.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      popupConfirm.close();\r\n    })\r\n    .finally(() => {\r\n      button.textContent = formRemoveCard.backTextButton();\r\n    })\r\n}\r\n\r\n// --- ФУНКЦИЯ Включаем/выключаем Лайк ---\r\nconst handleLikeClick = (id, isLiked, card) => {\r\n  if (isLiked) {\r\n    //отправляем запрос снятия лайка\r\n    api.deleteLike(id)\r\n      .then((data) => {\r\n        //вызываем метод карточки для обновления отображения лайков\r\n        card.setLikes(data.likes);\r\n        card.dislikeCard();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n  }\r\n  else {\r\n    //отправляем запрос на установку лайка\r\n    api.putLike(id)\r\n      .then((data) => {\r\n        //вызываем метод карточки для обновления отображения лайков\r\n        card.setLikes(data.likes);\r\n        card.likeCard();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n  }\r\n}\r\n\r\nconst popupNewCard = new PopupWithForm(modalNewCard, addCard, handleTrashClick, handleLikeClick);\r\npopupNewCard.setEventListeners();\r\n\r\n// --- Отрисовываем карточки при загрузке страницы\r\nconst initializationCards = new Section({\r\n  //data: initialCards,\r\n  renderer: (item, user) => {\r\n    const card = new Card(item, user, '.card-template', openBigCard, handleTrashClick, handleLikeClick);\r\n    const cardElement = card.generateCard();\r\n\r\n    initializationCards.addItem(cardElement);\r\n  }\r\n}, containerSelector);\r\n\r\n\r\n// ---БЛОК ОБРАБОТКИ СОБЫТИЙ ---\r\n\r\nprofileEditButton.addEventListener('click', openEditProfileModal);\r\nbuttonCreateCard.addEventListener('click', openAddCardModal);\r\nprofileAvatar.addEventListener('click', openAvatarModal);\r\n// ---"],"sourceRoot":""}